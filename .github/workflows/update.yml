name: Update Site

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
   build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Update site
      run: |
         (rm just || :) >/dev/null 2>&1 && curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to .
         ./just generate
         ./just copy
    - uses: stefanzweifel/git-auto-commit-action@v4
      with:
         commit_message: Update "docs"
         commit_options: '--no-verify'
         push_options: '--force'
         skip_dirty_check: true
